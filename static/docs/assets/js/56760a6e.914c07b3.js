"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[6537],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>p});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),p=a,f=d["".concat(s,".").concat(p)]||d[p]||h[p]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6433:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const o={title:"External firewall"},i=void 0,l={unversionedId:"staff/backend/firewall",id:"staff/backend/firewall",title:"External firewall",description:"We use a Palo Alto Networks (PAN) firewall provided by IST. We have one network",source:"@site/docs/staff/backend/firewall.md",sourceDirName:"staff/backend",slug:"/staff/backend/firewall",permalink:"/docs/staff/backend/firewall",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/staff/backend/firewall.md",tags:[],version:"current",frontMatter:{title:"External firewall"},sidebar:"tutorialSidebar",previous:{title:"Backups",permalink:"/docs/staff/backend/backups"},next:{title:"Git",permalink:"/docs/staff/backend/git"}},s={},c=[{value:"Administering the firewall",id:"administering-the-firewall",level:2},{value:"Accessing the interface",id:"accessing-the-interface",level:3},{value:"Policies",id:"policies",level:3},{value:"Syslog",id:"syslog",level:3}],u={toc:c};function h(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"We use a Palo Alto Networks (PAN) firewall provided by IST. We have one network\nport in the server room which is activated and behind the firewall; we have\nanother network port activated in the lab behind the television which is also\nbehind the firewall. All the ports the desktops use are also behind the\nfirewall since they are routed through the switch in the server room."),(0,a.kt)("h2",{id:"administering-the-firewall"},"Administering the firewall"),(0,a.kt)("h3",{id:"accessing-the-interface"},"Accessing the interface"),(0,a.kt)("p",null,"Administration of the firewall is done through the ",(0,a.kt)("a",{parentName:"p",href:"https://panorama.net.berkeley.edu"},"web interface"),",\nand must be done from an on-campus IP address (for instance through the\n",(0,a.kt)("a",{parentName:"p",href:"https://www.lib.berkeley.edu/using-the-libraries/vpn"},"library VPN")," or SOCKS proxying through an OCF host). ",(0,a.kt)("strong",{parentName:"p"},"Remember\nto specify https when loading the firewall admin page"),", as it does not have a\nredirect from http to https. If you are having connection issues with the\nfirewall admin page loading indefinitely, it is likely because you are trying\nto use http or trying to access it from an off-campus IP. To quickly set up a\nSOCKS proxy, run ",(0,a.kt)("inlineCode",{parentName:"p"},"ssh -D 8000 -N supernova")," from any off-campus host and then\nset up the SOCKS proxy (through your OS or through your browser's settings) to\nuse the proxy on ",(0,a.kt)("inlineCode",{parentName:"p"},"localhost")," and port ",(0,a.kt)("inlineCode",{parentName:"p"},"8000"),"."),(0,a.kt)("p",null,"To sign in to administer the firewall, make sure to use the single sign-on\n(SSO) option, and it will ask for CalNet authentication."),(0,a.kt)("h3",{id:"policies"},"Policies"),(0,a.kt)("p",null,'All our current policies are located in the "Pre Rules" section under\n"Security" in the policies tab. This option should be right at the top in the\nbox on the left side of the page. It contains all our rules since we are only\nblocking traffic (either outgoing or incoming) before it goes through the\nfirewall, so all we need are pre rules.'),(0,a.kt)("p",null,"In general the interface is pretty self-explanatory. Each rule has a custom\nname and a description that describes what kind of traffic it should be\nblocking or letting through, as well as the source and destination addresses\n(or groups of addresses), application (identified by the firewall), service\n(port), and whether it is allowed or blocked. Each rule has a dropdown next to\nthe rule name if you hover over it that leads to the log viewer, where you can\nsee what kind of traffic matched each rule and when the traffic was\nallowed/blocked."),(0,a.kt)("p",null,"Any changes made to the firewall policies need to be committed and pushed to\nthe firewall using the commit button and then the push button (or the commit\nand push button to do it in one step) located in the top right."),(0,a.kt)("h3",{id:"syslog"},"Syslog"),(0,a.kt)("p",null,"When we switched over to the new PAN firewall, syslog was set up to send\nmessages to ",(0,a.kt)("inlineCode",{parentName:"p"},"syslog.ocf.berkeley.edu"),", however it is only configured to send\nlogs there over TLS, so currently it is failing."))}h.isMDXComponent=!0}}]);