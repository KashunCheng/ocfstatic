"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3755],{3905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>d});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var u=n.createContext({}),i=function(e){var t=n.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},l=function(e){var t=i(e.components);return n.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,s=e.originalType,u=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),m=i(r),d=o,f=m["".concat(u,".").concat(d)]||m[d]||p[d]||s;return r?n.createElement(f,a(a({ref:t},l),{},{components:r})):n.createElement(f,a({ref:t},l))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=r.length,a=new Array(s);a[0]=m;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var i=2;i<s;i++)a[i]=r[i];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},4342:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>i});var n=r(7462),o=(r(7294),r(3905));const s={title:"Process accounting"},a=void 0,c={unversionedId:"staff/procedures/process-accounting",id:"staff/procedures/process-accounting",title:"Process accounting",description:"Sometimes we want to figure out how resources on a server have been used",source:"@site/docs/staff/procedures/process-accounting.md",sourceDirName:"staff/procedures",slug:"/staff/procedures/process-accounting",permalink:"/docs/staff/procedures/process-accounting",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/staff/procedures/process-accounting.md",tags:[],version:"current",frontMatter:{title:"Process accounting"},sidebar:"tutorialSidebar",previous:{title:"Printing maintenance",permalink:"/docs/staff/procedures/printing"},next:{title:"Restarting services",permalink:"/docs/staff/procedures/restarting-services"}},u={},i=[{value:"Useful commands",id:"useful-commands",level:2},{value:"List recent commands by user",id:"list-recent-commands-by-user",level:3},{value:"Show sorted CPU usage of all users (past day)",id:"show-sorted-cpu-usage-of-all-users-past-day",level:3}],l={toc:i};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Sometimes we want to figure out how resources on a server have been used\nrecently. For example, we might want to find which user was using tons of CPU\non the web server."),(0,o.kt)("p",null,"Process accounting lets us look at limited historical data for that. In\nparticular, process accounting logs what programs have been executed by what\nuser at what time and for how long. Program arguments are ",(0,o.kt)("em",{parentName:"p"},"not")," logged, which\nis good for helping ensure privacy."),(0,o.kt)("h2",{id:"useful-commands"},"Useful commands"),(0,o.kt)("p",null,"Some useful commands are below; see ",(0,o.kt)("inlineCode",{parentName:"p"},"man sa")," for many more options."),(0,o.kt)("h3",{id:"list-recent-commands-by-user"},"List recent commands by user"),(0,o.kt)("p",null,"List programs a user has run, along with timestamps and execution time."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"lastcomm $user\n")),(0,o.kt)("h3",{id:"show-sorted-cpu-usage-of-all-users-past-day"},"Show sorted CPU usage of all users (past day)"),(0,o.kt)("p",null,"Shows how much processing time each user has used, sorted by the seventh column\n(percentage of CPU minutes)."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"re")," is real minutes, ",(0,o.kt)("inlineCode",{parentName:"p"},"cp")," is CPU minutes (i.e. the time actually spent\nworking)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"sa -m -c | sort -n -k 7\n")))}p.isMDXComponent=!0}}]);