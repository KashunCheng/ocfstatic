"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[8587],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>m});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),p=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},c=function(e){var a=p(e.components);return n.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},d=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,y=d["".concat(l,".").concat(m)]||d[m]||u[m]||s;return t?n.createElement(y,o(o({ref:a},c),{},{components:t})):n.createElement(y,o({ref:a},c))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=t.length,o=new Array(s);o[0]=d;var i={};for(var l in a)hasOwnProperty.call(a,l)&&(i[l]=a[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<s;p++)o[p]=t[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},2125:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var n=t(7462),r=(t(7294),t(3905));const s={title:"Database (MySQL)"},o=void 0,i={unversionedId:"services/mysql",id:"services/mysql",title:"Database (MySQL)",description:"The OCF provides each user with a MySQL database. Read the following sections",source:"@site/docs/services/mysql.md",sourceDirName:"services",slug:"/services/mysql",permalink:"/docs/services/mysql",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/services/mysql.md",tags:[],version:"current",frontMatter:{title:"Database (MySQL)"},sidebar:"tutorialSidebar",previous:{title:"Software Mirrors",permalink:"/docs/services/mirrors"},next:{title:"Remote shell and file transfer (SSH/SFTP)",permalink:"/docs/services/shell/"}},l={},p=[{value:"Policies {policies}",id:"policies-policies",level:2},{value:"Web-based interface for editing",id:"web-based-interface-for-editing",level:2},{value:"Creating a MySQL database",id:"creating-a-mysql-database",level:2},{value:"Web-based tool",id:"web-based-tool",level:3},{value:"SSH Terminal",id:"ssh-terminal",level:3},{value:"Reset Password",id:"reset-password",level:2},{value:"Accessing MySQL",id:"accessing-mysql",level:2},{value:"Backing up a MySQL database",id:"backing-up-a-mysql-database",level:2},{value:"Restoring a MySQL database from backup",id:"restoring-a-mysql-database-from-backup",level:2},{value:"Using .my.cnf for passwordless access to MySQL",id:"using-mycnf-for-passwordless-access-to-mysql",level:2}],c={toc:p};function u(e){let{components:a,...t}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The OCF provides each user with a MySQL database. Read the following sections\nfor information about performing common MySQL tasks, and our rules and policies\nregarding MySQL."),(0,r.kt)("p",null,"The actual server runs ",(0,r.kt)("a",{parentName:"p",href:"https://mariadb.org/"},"MariaDB"),", which is an\nactive community-driven fork of MySQL. In practice, you shouldn't notice any\nimportant differences between the two, though MariaDB does contain ",(0,r.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mariadb/mariadb-vs-mysql-features/"},"some\nimprovements"),"."),(0,r.kt)("h2",{id:"policies-policies"},"Policies {policies}"),(0,r.kt)("p",null,"We limit users to 1 database, and this database has the same name as your\nusername. As a user of shared database server we ask you to respect the\ncommunity and refrain from any activities that will hurt the quality of service\nfor other users. We understand this policy is vague, so our suggested maximum\nsize for databases is 1GB, and for individual tables 256 MB. Storing large\namounts of data is not a problem unless the server has to perform complex\nqueries on this data."),(0,r.kt)("h2",{id:"web-based-interface-for-editing"},"Web-based interface for editing"),(0,r.kt)("p",null,"If you are looking for a familiar phpMyAdmin interface, visit\n",(0,r.kt)("a",{parentName:"p",href:"https://pma.ocf.berkeley.edu"},"https://pma.ocf.berkeley.edu"),"."),(0,r.kt)("h2",{id:"creating-a-mysql-database"},"Creating a MySQL database"),(0,r.kt)("p",null,"We have two options to create a database using the terminal or our web\nmanagement tool."),(0,r.kt)("h3",{id:"web-based-tool"},"Web-based tool"),(0,r.kt)("p",null,"[","[Click here|commands]","] and type in your username and password. Select the\noption: ",(0,r.kt)("inlineCode",{parentName:"p"},"makemysql \u2014 reset your MySQL database password, or create a new MySQL database")," and run the command. Note your password in a safe place."),(0,r.kt)("h3",{id:"ssh-terminal"},"SSH Terminal"),(0,r.kt)("p",null,"Log into the OCF via ",(0,r.kt)("a",{parentName:"p",href:"/docs/services/shell"},"SSH"),", at the terminal prompt enter\nthe command ",(0,r.kt)("inlineCode",{parentName:"p"},"makemysql"),". Hit yes to confirm the operation. Note your password\nin a safe place."),(0,r.kt)("h2",{id:"reset-password"},"Reset Password"),(0,r.kt)("p",null,"To reset a MySQL password simply follow the directions above for creating a\nMySQL database. This program WILL NOT DELETE an existing database."),(0,r.kt)("h2",{id:"accessing-mysql"},"Accessing MySQL"),(0,r.kt)("p",null,"Assuming your database is set up, in order to access it (or allow a web\napplication to access it), you will need 4 pieces of information:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Database Host: mysql"),(0,r.kt)("li",{parentName:"ul"},"Database Name: {your OCF username}"),(0,r.kt)("li",{parentName:"ul"},"Database User: {your OCF username}"),(0,r.kt)("li",{parentName:"ul"},"Database password: {your database password}")),(0,r.kt)("p",null,"Note: Your database password is not the same as your OCF account password. It\nis a randomly generated password that was created when your database was\ncreated. To use your OCF MySQL database with a web application, enter the above\ninformation during the application's installation process."),(0,r.kt)("p",null,"To connect to the OCF's MySQL server using the MySQL client on an OCF machine,\nsimply run the command: ",(0,r.kt)("inlineCode",{parentName:"p"},"mysql")),(0,r.kt)("p",null,"This command will prompt you for your MySQL database password."),(0,r.kt)("h2",{id:"backing-up-a-mysql-database"},"Backing up a MySQL database"),(0,r.kt)("p",null,"To backup your database (which you should probably do regularly), the basic\ncommand to use is"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mysqldump [username] > backup\n")),(0,r.kt)("p",null,"where username denotes your OCF username and ",(0,r.kt)("inlineCode",{parentName:"p"},"backup")," is the name of the file\nyou want to dump the contents of your database into. This command will prompt\nyou for your MySQL password."),(0,r.kt)("p",null,"To see more options, try running"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mysqldump --help\n")),(0,r.kt)("h2",{id:"restoring-a-mysql-database-from-backup"},"Restoring a MySQL database from backup"),(0,r.kt)("p",null,"If you need to restore your database from a backup (dump file) you made\npreviously, you simply need to connect to the database and run the SQL commands\nin the dump file. To do this from the command line, use"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mysql -D [username] < backup\n")),(0,r.kt)("p",null,"where backup is the name of the file that contains the dumped data. As usual,\nthis command will prompt you for your MySQL password."),(0,r.kt)("h2",{id:"using-mycnf-for-passwordless-access-to-mysql"},"Using .my.cnf for passwordless access to MySQL"),(0,r.kt)("p",null,"If you are using MySQL in a script or in another program, you will probably\nwant to set it up so that the ",(0,r.kt)("inlineCode",{parentName:"p"},"mysql")," call does not prompt for your password.\nWhile passing the -p option is the obvious way to achieve this, it is also\n",(0,r.kt)("em",{parentName:"p"},"very insecure")," because anyone on OCF can see the password while the mysql\ncommand is running. A better approach is to create a ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.my.cnf")," file with\nproper permissions that contains your MySQL password. To do this, enter the\nfollowing commands: make sure you replace dbpasswd with the MySQL password\ngiven to you when you ran makemysql."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"touch ~/.my.cnf\ncat >> ~/.my.cnf << EOF\n[client]\npassword = dbpasswd\nEOF\nchmod 600 ~/.my.cnf\n")),(0,r.kt)("p",null,"And make sure that your .my.cnf has correct permissions by running"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ls -l ~/.my.cnf\n-rw-------  1 staff ocf 64 2005-11-15 16:16 /home/s/st/staff/.my.cnf\n")),(0,r.kt)("p",null,"Now the mysql command will automatically log you in, so you won't have to\nmemorize or write down your MySQL password."))}u.isMDXComponent=!0}}]);