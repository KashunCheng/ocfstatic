<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-staff/rebuild/rt">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Request Tracker | OCF Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://new.ocf.berkeley.edu/docs/staff/rebuild/rt"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Request Tracker | OCF Docs"><meta data-rh="true" name="description" content="Note: RT is now deployed as a Kubernetes service running in Docker, so"><meta data-rh="true" property="og:description" content="Note: RT is now deployed as a Kubernetes service running in Docker, so"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://new.ocf.berkeley.edu/docs/staff/rebuild/rt"><link data-rh="true" rel="alternate" href="https://new.ocf.berkeley.edu/docs/staff/rebuild/rt" hreflang="en"><link data-rh="true" rel="alternate" href="https://new.ocf.berkeley.edu/docs/staff/rebuild/rt" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.3979abba.css">
<link rel="preload" href="/docs/assets/js/runtime~main.a314d0f9.js" as="script">
<link rel="preload" href="/docs/assets/js/main.4f9c1481.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OCF Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ocf/ocfstatic/tree/master/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">Frequently asked questions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/internal/about/">internal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/services/account/">services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/staff/backend/">staff</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staff/backend/">Infrastructure</a><button aria-label="Toggle the collapsible sidebar category &#x27;Infrastructure&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staff/getinvolved">Getting Involved</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staff/i3wm">i3wm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staff/mailing-lists">Staff mailing lists</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staff/policies/">Staff policies</a><button aria-label="Toggle the collapsible sidebar category &#x27;Staff policies&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staff/powers">Staff privileges</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staff/private">Additional documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staff/procedures/">Procedures</a><button aria-label="Toggle the collapsible sidebar category &#x27;Procedures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/staff/rebuild/">Rebuild</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rebuild&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/staff/rebuild/rt">Request Tracker</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staff/scripts/">Scripts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scripts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staff/startertasks/">Starter Tasks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Starter Tasks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/staff/techtalks">Tech talks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/staff/tips/">Tips and tricks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tips and tricks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">staff</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/staff/rebuild/"><span itemprop="name">Rebuild</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Request Tracker</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Request Tracker</h1></header><p><strong>Note:</strong> RT is now deployed as a Kubernetes service running in Docker, so
these instructions aren&#x27;t super useful for OCF staff. This page is kept as a
reference for others who might come across it (it ranks pretty highly on
Google). If you&#x27;re one of these people, you might find one of these useful:</p><ul><li><p><a href="https://github.com/ocf/puppet/tree/fc6d4242ba773cefbc9e7c1ea542f8f7de3e8785/modules/ocf_rt" target="_blank" rel="noopener noreferrer">Our Puppet code for installing RT.</a>
We don&#x27;t actually use this anymore, but it should be reasonably modern and
worked well for us for a long time.</p></li><li><p><a href="https://github.com/ocf/rt" target="_blank" rel="noopener noreferrer">Our Dockerized RT service.</a>
We run this on Kubernetes, but you should easily be able to get it running
on something like Mesos/Marathon or Docker Swarm, too.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">​</a></h2><p>Both Apache 2 and Nginx installation are listed below. Pick your poison...</p><ol><li><p>Install required packages:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo aptitude install mysql-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo aptitude install -t squeeze-backports request-tracker4 rt4-db-mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>For Apache 2:</strong> Install</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo install libapache-mod-auth-kerb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo install -t squeeze-backports rt4-apache</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>For Nginx:</strong> Install</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo install -t squeeze-backports nginx rt4-fcgi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and enable the RT FastCGI daemon: in <code>/etc/default/rt4-fcgi</code>, edit:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Debian packages an obscenely old version of Nginx in stable, so please don&#x27;t
install that. People will laugh at you.</p><p>Configuration by debconf:</p><ul><li>Name: rt.ocf.berkeley.edu</li><li>Handle RT_SiteConfig.pm permissions: yes</li><li>SQL password: ....</li></ul><p>Install RT::Extension::CommandByMail and RT::Extension::MergeUsers:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo cpan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cpan&gt; install RT::Extension::CommandByMail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cpan&gt; notest install RT::Extension::MergeUsers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When prompted, the RT lib folder is located at
<code>/usr/share/request-tracker4/lib</code>.</p></li><li><p>Copy site-specific RT configuration into
<code>/etc/request-tracker4/RT_SiteConfig.d/99-ocf</code>: (this should be puppeted)</p><div class="language-perl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-perl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Debug - commented out for now</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Set($LogToSTDERR, &quot;debug&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Set($LogToSyslog, &quot;debug&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($WebDomain, &#x27;rt.ocf.berkeley.edu&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($WebBaseURL , &quot;https://rt.ocf.berkeley.edu&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($WebPort, 443);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use external authentication provided by mod_auth_kerb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($WebExternalAuth , 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($WebFallbackToInternalAuth, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># tells RT to create users automatically if no user matching REMOTE_USER is found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($WebExternalAuto, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($WebExternalGecos, undef);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set(@MailPlugins, qw(Auth::MailFrom Filter::TakeAction));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set(@Plugins,(qw(RT::Extension::CommandByMail RT::Extension::MergeUsers)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Make links clicky</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set(@Active_MakeClicky, qw(httpurl_overwrite));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Non-fail To addresses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($UseFriendlyToLine, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable fulltext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set( %FullTextSearch,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Enable     =&gt; 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Indexed    =&gt; 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Table      =&gt; &#x27;AttachmentsIndex&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxMatches =&gt; &#x27;10000&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use plain text instead of HTML email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($MessageBoxRichText, undef);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Set($PreferRichText, undef);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Regenerate the resultant <code>RT_SiteConfig.pm</code> file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo update-rt-siteconfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Ensure that SSL certificates for <code>rt.ocf.berkeley.edu</code> exist at the
following locations:</p><ul><li>Certificate: <code>/etc/ssl/private/rt_ocf_berkeley_edu.crt</code></li><li>Certificate chain/bundle: <code>/etc/ssl/private/incommon.crt</code></li><li>Private key: <code>/etc/ssl/private/rt_ocf_berkeley_edu.key</code></li></ul><p><strong>Nginx only:</strong> Create a &quot;chained&quot; certificate file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat rt_ocf_berkeley_edu.crt incommon.crt &gt; rt_ocf_berkeley_edu.chained.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>For Apache 2:</strong> Copy the following RT configuration file <code>rt</code> into
<code>/etc/apache2/sites-available</code> and link to it from
<code>/etc/apache2/sites-enabled</code> (replace typhoon.ocf.berkeley.edu with the FQDN
reported by <code>hostname -f</code>):</p><div class="language-apache codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-apache codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Apache configuration file for RT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;VirtualHost *:80&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServerName rt.ocf.berkeley.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RewriteEngine On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/VirtualHost&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;VirtualHost *:443&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServerName rt.ocf.berkeley.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLEngine on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLCertificateFile /etc/ssl/private/rt_ocf_berkeley_edu.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLCertificateChainFile /etc/ssl/private/incommon.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLCertificateKeyFile /etc/ssl/private/rt_ocf_berkeley_edu.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Alias /rt /usr/share/request-tracker4/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RedirectMatch ^/$ /rt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Location /rt&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SetHandler modperl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PerlResponseHandler Plack::Handler::Apache2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PerlSetVar psgi_app /usr/share/request-tracker4/libexec/rt-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Comment this to enable RT-local root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AuthType Kerberos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Require valid-user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                KrbMethodNegotiate On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                KrbMethodK5Passwd On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                KrbLocalUserMapping On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                KrbServiceName HTTP/typhoon.ocf.berkeley.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Krb5KeyTab /etc/apache2/sites-available/rt.keytab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Location&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Location /rt/REST/1.0/NoAuth&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # No Kerberos - for rt-mailgate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Satisfy Any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Order Allow,Deny</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Allow from 128.32.129.218 # sandstorm.ocf.berkeley.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Location&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Location /rt/NoAuth&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # No Kerberos - login/logout pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Satisfy Any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Order Allow,Deny</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Allow from All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Location&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Perl&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                use Plack::Handler::Apache2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Plack::Handler::Apache2-&gt;preload(&quot;/usr/share/request-tracker4/libexec/rt-server&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Perl&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/VirtualHost&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>For Nginx:</strong> Copy the following RT configuration file <code>rt</code> into
<code>/etc/nginx/sites-available</code> and link to it from <code>/etc/nginx/sites-enabled</code>:</p><div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Configuration for RT on Nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># rt.ocf.berkeley.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listen 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server_name rt.ocf.berkeley.edu;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite ^ https://$server_name$request_uri? permanent;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listen 443;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server_name rt.ocf.berkeley.edu;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite ^/$ /rt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        root /usr/share/request-tracker4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location /rt {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # See /usr/share/doc/rt4-fcgi/examples/request-tracker4.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                expires epoch;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Require the default authentication on typhoon (pam_krb5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                auth_pam &quot;RT&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                auth_pam_service_name &quot;common-password&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Proxy over to rt4.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fastcgi_pass unix:/var/run/rt4-fcgi.sock;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                include /etc/nginx/fastcgi_params;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fastcgi_param REMOTE_USER $remote_user;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fastcgi_param SCRIPT_NAME &quot;/rt&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Bypass FastCGI for images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location /rt/NoAuth/images {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                alias           /usr/share/request-tracker4/html/NoAuth/images/;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location /rt/REST/1.0/NoAuth {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                allow           128.32.129.218; # sandstorm.ocf.berkeley.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                deny            all;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fastcgi_pass unix:/var/run/rt4-fcgi.sock;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                include /etc/nginx/fastcgi_params;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fastcgi_param REMOTE_USER $remote_user;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fastcgi_param SCRIPT_NAME &quot;/rt&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Same as apache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl_certificate /etc/ssl/private/rt_ocf_berkeley_edu.chained.crt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl_certificate_key /etc/ssl/private/rt_ocf_berkeley_edu.key;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl_session_timeout 5m;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl_session_cache shared:SSL:10m;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl_protocols SSLv3 TLSv1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv3:+EXP;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ssl_prefer_server_ciphers on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Apache 2 only:</strong> Obtain a keytab for the principal
HTTP/<a href="mailto:typhoon.ocf.berkeley.edu@OCF.BERKELEY.EDU" target="_blank" rel="noopener noreferrer">typhoon.ocf.berkeley.edu@OCF.BERKELEY.EDU</a> (replace
typhoon.ocf.berkeley.edu with the FQDN reported by <code>hostname -f</code>) and place
it into <code>/etc/apache2/sites-available/rt.keytab</code>. Make sure it&#x27;s only
readable by www-data.</p></li><li><p>mod_auth_kerb/ngx_http_auth_pam uses HTTP Basic authorization which has no
concept of login/logout. Emulate logout behavior by changing the Logout page
to send a 401 (works for Chrome), run proprietary IE code (works for IE),
and make an Ajax call to a non-existing page with bad credentials (works for
Firefox).</p><p>The below code has been &quot;adapted&quot; from <a href="https://trac-hacks.org/wiki/TrueHttpLogoutPatch" target="_blank" rel="noopener noreferrer">https://trac-hacks.org/wiki/TrueHttpLogoutPatch</a></p><p>This should be fixed so that RT&#x27;s installation files aren&#x27;t being directly modified.</p><p>Edit <code>/usr/share/request-tracker4/html/NoAuth/Logout.html</code>:</p><p>Change</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;&amp; /Elements/Header, Title =&gt; loc(&#x27;Logout&#x27;), Refresh =&gt; RT-&gt;Config-&gt;Get(&#x27;LogoutRefresh&#x27;) &amp;&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;&amp; /Elements/Header, Title =&gt; loc(&#x27;Logout&#x27;) &amp;&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and paste the following below it:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script type=&quot;text/javascript&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function clearAuthenticationCache() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var agent = navigator.userAgent.toLowerCase();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (agent.indexOf(&quot;msie&quot;) != -1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // This works only on IE only.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      document.execCommand(&quot;ClearAuthenticationCache&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      var xml = createXMLObject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Let&#x27;s prepare invalid credentials</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      xml.open(&quot;GET&quot;, Math.random().toString(), true, &quot;logout&quot;, &quot;logout&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      xml.send(&quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      xml.abort();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } catch (e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function createXMLObject() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (window.XMLHttpRequest) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      xml = new XMLHttpRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if (window.ActiveXObject) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      xml = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } catch (e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xml = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return xml;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clearAuthenticationCache();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add the following before the end of the &lt;%INIT&gt; block at the end of the file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;Force&quot; logout due to using mod_auth_kerb -- Chrome</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HTML::Mason::Commands::r-&gt;status(401);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Clear the RT Mason cache.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo rm -rf /var/cache/request-tracker4/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>For Apache 2:</strong> Restart Apache.</p><p><strong>For Nginx:</strong> Restart the RT FastCGI daemon.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo service rt4-fcgi restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Install the RT <a href="https://rt-wiki.bestpractical.com/wiki/EmailInterface#RT.27s_mail_gate" target="_blank" rel="noopener noreferrer">mailgate
program</a>
on the mail server.</p><p>squeeze-backports is required here too.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo aptitude install rt4-clients</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Set up <a href="mailto:rt@ocf.berkeley.edu" target="_blank" rel="noopener noreferrer">rt@ocf.berkeley.edu</a> to feed mail into rt-mailgate.</p><p>Add or edit the following lines into <code>/var/mail/aliases/aliases</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rt: &quot;|/usr/bin/rt-mailgate --queue General --action correspond --url https://rt.ocf.berkeley.edu/rt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rt-comment: &quot;|/usr/bin/rt-mailgate --queue General --action comment --url https://rt.ocf.berkeley.edu/rt&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><ol><li><p>The RT root user can&#x27;t log in while Kerberos password authentication is
enabled because of the way <code>mod_auth_kerb/ngx_http_auth_pam</code> works. So, you
must first log in with Kerberos credentials to create a user from Kerberos
and grant superuser rights on it.</p><p>Log in to RT. You will be auto-created and redirected to Self-Service.
Disable Kerberos password authentication:</p><p><strong>Apache 2:</strong> Comment out the following lines in <code>/etc/apache2/sites-available/rt</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># AuthType Kerberos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Require valid-user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and force-reload Apache configuration (<code>service apache2 force-reload</code>).</p><p><strong>Nginx:</strong> Comment out the following lines in <code>/etc/nginx/sites-available/rt</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># auth_pam &quot;RT&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># auth_pam_service_name &quot;common-password&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and restart Nginx (<code>service nginx restart</code>).</p></li><li><p>Visit RT again and log in as RT root.</p><p>Go to Tools &gt; Configuration &gt; Users &gt; Select, and type in your username in
&quot;Go to user&quot;. Enable <strong>Let this user be granted rights (Privileged)</strong>.</p><p>Go to Tools &gt; Configuration &gt; Global &gt; User Rights. On the left side, in Add
User, type your name. Then, on the right side, click the tab <strong>Rights for
Administrators</strong>, and enable <strong>Do anything and everything</strong>.</p><p>Save changes.</p><p>You will want to remove your superuser powers later because superusers may
be artificially limited in rights elsewhere on RT for your own protection:
<a href="https://rt-wiki.bestpractical.com/wiki/SuperUser" target="_blank" rel="noopener noreferrer">&quot;Starting from version 3.2 (or 3.4?) RT doesn&#x27;t show users with the
SuperUser right in a ticket owner
select-box.&quot;</a></p><p>Re-enable Kerberos password authentication in Apache configuration and
force-reload Apache.</p></li><li><p>Create groups. I&#x27;ve created root and staff groups; this configuration may
change as our use of RT is refined.</p><p>Go to Tools &gt; Configuration &gt; Groups &gt; Create and create &quot;Root&quot; and &quot;Staff&quot;
groups.</p><p>Add users to these groups by the <strong>Members</strong> subsection in the upper right
corner of the group modification page. (You can also alter a user&#x27;s group
memberships from the user&#x27;s modification page.)</p><p>In this configuration I see the set of RT privileged users to be the same as
the set of users in group &quot;Staff&quot;. This may change.</p></li><li><p>Enable user rights. <a href="https://rt-wiki.bestpractical.com/wiki/Rights" target="_blank" rel="noopener noreferrer">This</a>
guide is being followed.</p><p>Go to Tools &gt; Configuration &gt; Global &gt; Group Rights.</p><p><strong>Save your changes each time you make changes to a group&#x27;s rights.</strong></p><p>Make sure the selected group is <strong>Everyone</strong>.</p><p>Select the following rights:</p><ul><li>Comment on tickets</li><li>Create tickets</li><li>Reply to tickets</li><li>View queue</li><li>View ticket summaries</li></ul><p>Now add a group to add permissions to, from the bottom left: Add Group</p><p>Add these rights to &quot;Staff&quot;, in the &quot;Rights for Staff&quot; tab:</p><ul><li>Delete tickets</li><li>Modify one&#x27;s own RT account</li><li>Modify tickets</li><li>Own tickets</li><li>Steal tickets</li><li>Take tickets</li><li>View private ticket commentary</li></ul><p>Add these rights to &quot;Root&quot;, in the &quot;Rights for Administrators&quot; tab:</p><ul><li>Everything except &quot;Do anything and everything&quot;</li></ul></li><li><p>Miscellaneous configuration</p><p>Change RT root&#x27;s info so he can be a front for staff@. (Tools &gt;
Configuration &gt; Users &gt; Select, click root, change email to
<a href="mailto:staff@ocf.berkeley.edu" target="_blank" rel="noopener noreferrer">staff@ocf.berkeley.edu</a> and Real Name to OCF Staff).</p><p>Make the General queue sound better: Tools &gt; Configuration &gt; Queues &gt;
Select, click General, change Description to &quot;OCF Staff&quot;. (I think changing
the Queue Name would be nice too. If you do that, remember to change the
parameters to rt-mailgate in <code>/var/mail/aliases/aliases</code> and re-run
newaliases on sandstorm.)</p><p>Add root as a watcher for General so staff@ gets automatically Cc&#x27;ed to new
tickets. Click Watchers in the upper right corner and add root.</p></li><li><p>Send more mail.</p><p>By default RT only sends an autoreply to the requestor on ticket creation.
Create a new scrip (RT callback) so that Cc (staff@) gets notified on ticket
creation as well.</p><p>Create that which is to be mailed: go to Tools &gt; Configuration &gt; Global &gt;
Templates &gt; Create.</p><p>Create a template with the name &quot;Correspondence Creation&quot; and description
&quot;For mailing staff on ticket creation, but without all that boilerplate&quot;.
Keep type as &quot;Perl&quot;. Paste this in as the content:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RT-Attach-Message: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Subject: {$Ticket-&gt;Subject}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{$Transaction-&gt;Content()}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Save changes.</p><p>Modify the scrip &quot;On Create Notify AdminCcs&quot; to use the template &quot;Global Template: Correspondence Creation&quot;.</p></li><li><p>Send spoofed mail.</p><p>Mail in the past has come from actual people, not endless drones of &quot;via
RT&quot;. Let&#x27;s fake that for people who are uncomfortable with change. At the
top of Correspondence, Admin Correspondence, Admin Comment, and
Correspondence Creation templates, append the following below the last mail
header that appears, if any exist:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">From: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  my $u = $Transaction-&gt;CreatorObj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  my $a = $u-&gt;EmailAddress;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  my $res = $u-&gt;RealName || $u-&gt;Name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $res .= &quot; &lt;&quot;.$a .&quot;&gt;&quot; ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$res; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Automatically close tickets.</p><p>This needs to be chained or something to send a template saying that the
ticket is closed because it hasn&#x27;t been modified in 30 days. I don&#x27;t know
what this entails, but the below is a start.</p><p>Put the following into a crontab; you may want to create a rt system user to
run this.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0 * * * * /usr/bin/rt-crontool --search RT::Search::FromSQL \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--search-arg &quot;LastUpdated &lt; &#x27;5 days ago&#x27; AND Status = &#x27;stalled&#x27;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--action RT::Action::SetStatus --action-arg resolved</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>References:
<a href="http://lists.bestpractical.com/pipermail/rt-users/2005-February/028837.html" target="_blank" rel="noopener noreferrer">1</a>
<a href="https://rt-wiki.bestpractical.com/wiki/UntouchedInHours" target="_blank" rel="noopener noreferrer">2</a>
<a href="https://rt-wiki.bestpractical.com/wiki/TimedNotifications" target="_blank" rel="noopener noreferrer">3</a></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a class="hash-link" href="#notes" title="Direct link to heading">​</a></h2><ul><li>First-time autocreated users will have incorrect/embarrassing Real Names (for
some reason, it grabs the gecos on occasion), so that should be fixed upon
first login. Users can also update this information when they feel like it.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="todo">Todo<a class="hash-link" href="#todo" title="Direct link to heading">​</a></h2><ul><li>Fix Chrome double login, if possible.<ul><li>Doesn&#x27;t occur when running Nginx, only Apache 2.</li></ul></li><li>Set up ticket autoclose using
<a href="https://rt-wiki.bestpractical.com/wiki/UntouchedInHours" target="_blank" rel="noopener noreferrer">https://rt-wiki.bestpractical.com/wiki/UntouchedInHours</a> or
<a href="https://rt-wiki.bestpractical.com/wiki/TimedNotifications" target="_blank" rel="noopener noreferrer">https://rt-wiki.bestpractical.com/wiki/TimedNotifications</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h2><ul><li><a href="https://rt-wiki.bestpractical.com/wiki/Main_Page" target="_blank" rel="noopener noreferrer">https://rt-wiki.bestpractical.com/wiki/Main_Page</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/staff/rebuild/rt.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/staff/rebuild/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Rebuild</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/staff/scripts/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scripts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li><li><a href="#todo" class="table-of-contents__link toc-highlight">Todo</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Board of Directors of the Open Computing Facility.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.a314d0f9.js"></script>
<script src="/docs/assets/js/main.4f9c1481.js"></script>
</body>
</html>